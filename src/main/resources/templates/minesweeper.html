<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8" />
	<title>Minesweeper</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/minesweeper/mines.css">
</head>
<body>

<div th:if="${@minesweeperController.solved}">
					<div class="bg-success ">
					<p class="text-center text-white p-2">You won !!!</p>
					</div>
</div>

<div th:replace="/fragments/gamenav :: navgame"></div>



	<div class="container">
			<header>
				<h1 class="text-center p-4">Welcome in Minesweeper</h1>
			</header>
		<div class="row">
			<div class="content p-3">
					<a href="/minesweeper">New Game</a>
					<a href="/">BACK TO HOMEPAGE</a>
					<span th:if="${@minesweeperController.marking}">MARKING</span>
					<span th:if="${not @minesweeperController.marking}">OPENING</span>
					<a href="/minesweeper/change">Change state</a>
					 <div th:utext="${@minesweeperController.htmlField}"/>
			</div>
			</div>
		</div>
		<div class="container">
		<div class="row">
			<section class="col-12">
				<h5>Rating</h5>
				<div th:if="${@loginController.logged}">
				<p class="col-4 bg-success p-3 text-white text-center" th:utext="${@minesweeperController.averageRating}"></p>
						<form class="col-4" action="/minesweeper/rating">
							<div class="rating"> 
								<input type="radio" name="rating" value="5" id="1"><label for="1">☆</label> 
								<input type="radio" name="rating" value="4" id="2"><label for="2">☆</label> 
								<input type="radio" name="rating" value="3" id="3"><label for="3">☆</label> 
								<input type="radio" name="rating" value="2" id="4"><label for="4">☆</label> 
								<input type="radio" name="rating" value="1" id="5"><label for="5">☆</label>
							</div>
							<button class="btn btn-primary text-white" type="submit">Submit</button>
						</form>	
				</div>
				<div th:if="${not @loginController.logged}">
					<div class="box">
						<div th:text="${@minesweeperController.averageRating}"></div>
						<p>You must be logged, when you want to rate game</p>
						<span>Please<a href="/">log in</a></span>
					</div>
				</div>
			</section>
			</div>
		</div>
		<div class="container">
			<div class="row">
				<section class="col-4">
					<h3>Scores:</h3>
					<ol class="list-group">
					 	<li class="list-group-item" th:each="score : ${@minesweeperController.scores}" ><b>Username:</b>
					 		<span th:text="${score.username}" ></span>
					 		<b>score:</b> <span th:text="${score.value}" ></span>
					 	</li>
					</ol>
				</section>
				<section class="col-4">
				<div th:if="${@loginController.logged}">
					<h3>Insert your comment</h3>
						<form action="/minesweeper/comment/">
							<div class="form-group ">
								<textarea class="form-control" name="text" cols="30" rows="10"></textarea>
								<input class="btn btn-primary mt-2" type="submit" value="Submit a comment" />
							</div>
						</form>
				</div>
				<div th:if="${not @loginController.logged}">
					<div class="box">
						<p>You must be logged, when you want to write comments</p>
							<span>Please<a href="/">log in</a></span>
					</div>
				</div>
				</section>
				<section class="col-4">
					<h3>Comments</h3>
					<ul class="list-group">
						<li class="list-group-item mt-2" th:each="comment: ${@minesweeperController.comments}">
							<span th:text="${comment.username}"></span><br />
							<span th:text="${comment.content}"></span>
						</li>
					</ul>
				</section>
			</div>
		</div>
		
		<!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>
</html>